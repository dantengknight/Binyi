<html>

    <head>

        <title> Javascript </title>

        <style type="text/css">

            img {

                width:200px;
                height:200px;
                display:none;
                position:relative;


            }


        </style>

    </head>


    <body>

        <h1>Rats Game</h1>
    
        
        <p>Your score: <span id="score"></span></p>

        <p>Count down: <span id="countdown"></span></p>

        <p id="result"></p>

        <img id="ham0" onclick="hit(0)" src="images/hamtaro0.gif">
        <img id="ham1" onclick="hit(1)" src="images/hamtaro1.png">
        <img id="ham2" onclick="hit(2)" src="images/hamtaro2.jpg">
        <img id="ham3" onclick="hit(3)" src="images/hamtaro3.jpg">
        <img id="ham4" onclick="hit(4)" src="images/hamtaro4.png">
        


        <script type="text/javascript">

            // set variables
            var score = 0;
                cd = 20;


            // start game
            startGame();

            countdown();

            function startGame() {

                // init time interval function
                interval0 = setInterval("showRat()", 2500);
                interval1 = setInterval("showRat()", 2001);


            }

            function countdown() {


                if ( cd == 0) {
                    gameOver();
                }
                else {
                    cd -= 1;
                    document.getElementById("countdown").innerHTML = cd;
                    timeout1 = setTimeout(countdown, 1000);
                }
            
            }



            function showRat() {

                // pick a random rat
                var ratId = Math.floor(Math.random() * 4);
                ratId = "ham" + ratId;
                // show that rat, set width, height, display
                var top = Math.random() * 150;
                var left = Math.random() * 1200;
                document.getElementById(ratId).style.top = top + "px";
                document.getElementById(ratId).style.left = left + "px";
                document.getElementById(ratId).style.display = "block";

                // disappear in a random time range
                var disappearTime = Math.random() * 1000 + 1500;
                timeout = setTimeout(disappear(ratId), disappearTime);

            }


            function disappear(ratId) {

                return function() {
                    document.getElementById(ratId).style.display = "none";
                }

            }

            function hit(ratId) {

                ratId = "ham" + ratId;
                console.log(ratId);
                score += 1;
                document.getElementById("score").innerHTML = score;
                document.getElementById(ratId).style.display = "none";

                // make a surprise face
                document.getElementById("ham4").style.display = "block";
                document.getElementById("ham4").style.top =
                    document.getElementById(ratId).style.top;
                document.getElementById("ham4").style.left =
                    document.getElementById(ratId).style.left;
                setTimeout(disappear("ham4"), 1500);// surprise face
           
            }

            function gameOver() {

                clearInterval(interval0);
                clearInterval(interval1);
                clearTimeout(timeout);
                clearTimeout(timeout1);
                clearRats();
                document.getElementById("result").innerHTML = "Your final score is " +
                    score + " !";


            }

            function clearRats() {

                for (var i=0; i < 5; i++) {
                    document.getElementById("ham"+i).style.display = "none";
                }

            }
            

        </script>

    </body>


</html>
